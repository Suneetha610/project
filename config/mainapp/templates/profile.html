{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profile | Expense Tracker</title>
<style>
body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f6f8fb;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

.profile-card {
  background: #fff;
  width: 400px;
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  padding: 30px 25px;
  text-align: center;
  position: relative;
}

.profile-card h2 {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 20px;
  color: #333;
}

.profile-img {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 10px;
  border: 4px solid #f0f0f0;
}

.profile-form {
  text-align: left;
  margin-top: 10px;
}

.profile-form label {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 5px;
  display: block;
  color: #666;
}

.profile-form input, 
.profile-form textarea, 
.profile-form select {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  border-radius: 12px;
  border: 1px solid #ddd;
  font-size: 14px;
  outline: none;
  background: #fafafa;
  transition: border 0.2s;
}
.profile-form input:focus,
.profile-form textarea:focus,
.profile-form select:focus {
  border: 1px solid #2575fc;
  background: #fff;
}

button {
  width: 100%;
  padding: 12px;
  background: #2575fc;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: #1b5ed7;
}

.note {
  font-size: 12px;
  color: #888;
  margin-bottom: 15px;
  text-align: center;
}

.back-link {
  display: inline-block;
  margin-top: 15px;
  font-size: 14px;
  color: #2575fc;
  text-decoration: none;
}
.back-link:hover {
  text-decoration: underline;
}

/* üîπ Message styles */
.message-box {
  margin-bottom: 15px;
  padding: 10px;
  border-radius: 6px;
  font-size: 14px;
  text-align: center;
}
.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
</style>
</head>
<body>
<div class="profile-card">
  <h2>My Profile</h2>

  <!-- ‚úÖ Flash Messages -->
  {% if messages %}
    {% for message in messages %}
      <div class="message-box 
                  {% if message.tags == 'success' %}success{% elif message.tags == 'error' %}error{% elif message.tags == 'warning' %}warning{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
  
  {% if profile.image %}
    <img src="{{ profile.image.url }}" class="profile-img" alt="Profile Picture">
  {% else %}
    <img src="{% static 'images/default-avatar.png' %}" class="profile-img" alt="Default Profile">
  {% endif %}

  <form method="POST" enctype="multipart/form-data" class="profile-form">
    {% csrf_token %}
    
    <label>Username</label>
    <input type="text" value="{{ user.username }}" disabled>

    <label>Email</label>
    <input type="email" value="{{ user.email }}" disabled>

    <label for="id_image">Profile Photo</label>
    {{ form.image }}

    <label for="id_phone">Phone Number</label>
    {{ form.phone }}

    <label for="id_address">Address</label>
    {{ form.address }}

    <!-- üîπ Monthly Limit -->
    <label for="id_monthly_limit">Monthly Limit (‚Çπ)</label>
    {{ form.monthly_limit }}

    <!-- üîπ Total Income -->
    <label for="id_total_amount">Total Income (‚Çπ)</label>
    {{ form.total_amount }}

    <!-- üîπ Savings -->
    <label for="id_savings">Savings (‚Çπ)</label>
    {{ form.savings }}

    <button type="submit">Update Profile</button>
  </form>
  <p class="note">You can update your photo, phone, address, monthly limit, income & savings.</p>

  <!-- üîô Back to Dashboard -->
  <a href="{% url 'dashboard' %}" class="back-link">‚Üê Back to Dashboard</a>
</div>
</body>
</html>
